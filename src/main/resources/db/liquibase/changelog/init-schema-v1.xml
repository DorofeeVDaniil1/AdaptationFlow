<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.31.xsd"
        objectQuotingStrategy="QUOTE_ONLY_RESERVED_WORDS">
    <changeSet id="1758177035271-1" author="Daniil">
        <createTable tableName="achievement">
            <column name="id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="achievement_pkey"/>
            </column>
            <column name="code" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="title" type="VARCHAR(150)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="CLOB"/>
            <column name="points" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="create_ts" type="timestamp"/>
            <column name="created_by" type="VARCHAR(50)"/>
            <column name="update_ts" type="timestamp"/>
            <column name="updated_by" type="VARCHAR(50)"/>
            <column name="delete_ts" type="timestamp"/>
            <column name="deleted_by" type="VARCHAR(50)"/>
        </createTable>
    </changeSet>
    <changeSet id="1758177035271-2" author="Daniil">
        <createTable tableName="anketa">
            <column name="id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="anketa_pkey"/>
            </column>
            <column name="user_id" type="uuid">
                <constraints nullable="false"/>
            </column>
            <column name="task_id" type="uuid">
                <constraints nullable="false"/>
            </column>
            <column name="difficulty_rating" type="SMALLINT">
                <constraints nullable="false"/>
            </column>
            <column name="satisfaction_rating" type="SMALLINT">
                <constraints nullable="false"/>
            </column>
            <column name="create_ts" type="timestamp"/>
            <column name="created_by" type="VARCHAR(50)"/>
            <column name="update_ts" type="timestamp"/>
            <column name="updated_by" type="VARCHAR(50)"/>
            <column name="delete_ts" type="timestamp"/>
            <column name="deleted_by" type="VARCHAR(50)"/>
        </createTable>
    </changeSet>
    <changeSet id="1758177035271-3" author="Daniil">
        <createTable tableName="anketa_question_link">
            <column name="anketa_id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="anketa_question_link_pkey"/>
            </column>
            <column name="question_id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="anketa_question_link_pkey"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1758177035271-4" author="Daniil">
        <createTable tableName="answer_option">
            <column name="id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="answer_option_pkey"/>
            </column>
            <column name="question_id" type="uuid">
                <constraints nullable="false"/>
            </column>
            <column name="answer_text" type="CLOB">
                <constraints nullable="false"/>
            </column>
            <column name="is_active" type="BOOLEAN"/>
            <column name="is_correct" type="BOOLEAN"/>
            <column name="create_ts" type="timestamp"/>
            <column name="created_by" type="VARCHAR(50)"/>
            <column name="update_ts" type="timestamp"/>
            <column name="updated_by" type="VARCHAR(50)"/>
            <column name="delete_ts" type="timestamp"/>
            <column name="deleted_by" type="VARCHAR(50)"/>
        </createTable>
    </changeSet>
    <changeSet id="1758177035271-5" author="Daniil">
        <createTable tableName="notification">
            <column name="id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="notification_pkey"/>
            </column>
            <column name="type" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="sent_at" type="timestamp"/>
            <column name="read" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="create_ts" type="timestamp"/>
            <column name="created_by" type="VARCHAR(50)"/>
            <column name="update_ts" type="timestamp"/>
            <column name="updated_by" type="VARCHAR(50)"/>
            <column name="delete_ts" type="timestamp"/>
            <column name="deleted_by" type="VARCHAR(50)"/>
        </createTable>
    </changeSet>
    <changeSet id="1758177035271-6" author="Daniil">
        <createTable tableName="notification_user_link">
            <column name="notification_id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="notification_user_link_pkey"/>
            </column>
            <column name="user_id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="notification_user_link_pkey"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1758177035271-7" author="Daniil">
        <createTable tableName="onboarding_track">
            <column name="id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="onboarding_track_pkey"/>
            </column>
            <column name="title" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="CLOB"/>
            <column name="create_ts" type="timestamp"/>
            <column name="created_by" type="VARCHAR(50)"/>
            <column name="update_ts" type="timestamp"/>
            <column name="updated_by" type="VARCHAR(50)"/>
            <column name="delete_ts" type="timestamp"/>
            <column name="deleted_by" type="VARCHAR(50)"/>
        </createTable>
    </changeSet>
    <changeSet id="1758177035271-8" author="Daniil">
        <createTable tableName="points_rule">
            <column name="id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="points_rule_pkey"/>
            </column>
            <column name="entity_type" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="entity_id" type="uuid">
                <constraints nullable="false"/>
            </column>
            <column name="points" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="CLOB"/>
            <column name="active" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="create_ts" type="timestamp"/>
            <column name="created_by" type="VARCHAR(50)"/>
            <column name="update_ts" type="timestamp"/>
            <column name="updated_by" type="VARCHAR(50)"/>
            <column name="delete_ts" type="timestamp"/>
            <column name="deleted_by" type="VARCHAR(50)"/>
        </createTable>
    </changeSet>
    <changeSet id="1758177035271-9" author="Daniil">
        <createTable tableName="points_transaction">
            <column name="id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="points_transaction_pkey"/>
            </column>
            <column name="user_id" type="uuid">
                <constraints nullable="false"/>
            </column>
            <column name="points_rule_id" type="uuid">
                <constraints nullable="false"/>
            </column>
            <column name="anketa_id" type="uuid"/>
            <column name="points" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="create_ts" type="timestamp"/>
            <column name="created_by" type="VARCHAR(50)"/>
            <column name="update_ts" type="timestamp"/>
            <column name="updated_by" type="VARCHAR(50)"/>
            <column name="delete_ts" type="timestamp"/>
            <column name="deleted_by" type="VARCHAR(50)"/>
        </createTable>
    </changeSet>
    <changeSet id="1758177035271-10" author="Daniil">
        <createTable tableName="progress">
            <column name="id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="progress_pkey"/>
            </column>
            <column name="detail_id" type="uuid"/>
            <column name="completed_at" type="timestamp"/>
            <column name="comment" type="CLOB"/>
            <column name="assignment_user" type="uuid">
                <constraints nullable="false"/>
            </column>
            <column name="assignment_task" type="uuid">
                <constraints nullable="false"/>
            </column>
            <column name="create_ts" type="timestamp"/>
            <column name="created_by" type="VARCHAR(50)"/>
            <column name="update_ts" type="timestamp"/>
            <column name="updated_by" type="VARCHAR(50)"/>
            <column name="delete_ts" type="timestamp"/>
            <column name="deleted_by" type="VARCHAR(50)"/>
        </createTable>
    </changeSet>
    <changeSet id="1758177035271-11" author="Daniil">
        <createTable tableName="questions">
            <column name="id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="questions_pkey"/>
            </column>
            <column name="question_text" type="CLOB">
                <constraints nullable="false"/>
            </column>
            <column name="is_active" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="create_ts" type="timestamp"/>
            <column name="created_by" type="VARCHAR(50)"/>
            <column name="update_ts" type="timestamp"/>
            <column name="updated_by" type="VARCHAR(50)"/>
            <column name="delete_ts" type="timestamp"/>
            <column name="deleted_by" type="VARCHAR(50)"/>
        </createTable>
    </changeSet>
    <changeSet id="1758177035271-12" author="Daniil">
        <createTable tableName="role">
            <column name="id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="role_pkey"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="CLOB"/>
            <column name="create_ts" type="timestamp"/>
            <column name="created_by" type="VARCHAR(50)"/>
            <column name="update_ts" type="timestamp"/>
            <column name="updated_by" type="VARCHAR(50)"/>
            <column name="delete_ts" type="timestamp"/>
            <column name="deleted_by" type="VARCHAR(50)"/>
        </createTable>
    </changeSet>
    <changeSet id="1758177035271-13" author="Daniil">
        <createTable tableName="support_request">
            <column name="id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="support_request_pkey"/>
            </column>
            <column name="user_id" type="uuid">
                <constraints nullable="false"/>
            </column>
            <column name="question" type="CLOB">
                <constraints nullable="false"/>
            </column>
            <column name="answer" type="CLOB"/>
            <column name="status" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="answered_at" type="timestamp"/>
            <column name="create_ts" type="timestamp"/>
            <column name="created_by" type="VARCHAR(50)"/>
            <column name="update_ts" type="timestamp"/>
            <column name="updated_by" type="VARCHAR(50)"/>
            <column name="delete_ts" type="timestamp"/>
            <column name="deleted_by" type="VARCHAR(50)"/>
        </createTable>
    </changeSet>
    <changeSet id="1758177035271-14" author="Daniil">
        <createTable tableName="sys_user_role_link">
            <column name="user_id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="sys_user_role_link_pkey"/>
            </column>
            <column name="role_id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="sys_user_role_link_pkey"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1758177035271-15" author="Daniil">
        <createTable tableName="sys_users">
            <column name="id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="sys_users_pkey"/>
            </column>
            <column name="login" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="password_hash" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="first_name" type="VARCHAR(50)"/>
            <column name="last_name" type="VARCHAR(50)"/>
            <column name="patronymic" type="VARCHAR(100)"/>
            <column name="email" type="VARCHAR(254)"/>
            <column name="is_active" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="last_login_date" type="timestamp"/>
            <column name="user_level_id" type="uuid"/>
            <column name="create_ts" type="timestamp"/>
            <column name="created_by" type="VARCHAR(50)"/>
            <column name="update_ts" type="timestamp"/>
            <column name="updated_by" type="VARCHAR(50)"/>
            <column name="delete_ts" type="timestamp"/>
            <column name="deleted_by" type="VARCHAR(50)"/>
        </createTable>
    </changeSet>
    <changeSet id="1758177035271-16" author="Daniil">
        <createTable tableName="task_detail">
            <column name="id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="task_detail_pkey"/>
            </column>
            <column name="task_id" type="uuid">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="CLOB"/>
            <column name="status" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="create_ts" type="timestamp"/>
            <column name="created_by" type="VARCHAR(50)"/>
            <column name="update_ts" type="timestamp"/>
            <column name="updated_by" type="VARCHAR(50)"/>
            <column name="delete_ts" type="timestamp"/>
            <column name="deleted_by" type="VARCHAR(50)"/>
        </createTable>
    </changeSet>
    <changeSet id="1758177035271-17" author="Daniil">
        <createTable tableName="task_detail_additional_info">
            <column name="id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="task_detail_additional_info_pkey"/>
            </column>
            <column name="task_detail_id" type="uuid">
                <constraints nullable="false"/>
            </column>
            <column name="document_url" type="CLOB">
                <constraints nullable="false"/>
            </column>
            <column name="category" type="CLOB">
                <constraints nullable="false"/>
            </column>
            <column name="create_ts" type="timestamp"/>
            <column name="created_by" type="VARCHAR(50)"/>
            <column name="update_ts" type="timestamp"/>
            <column name="updated_by" type="VARCHAR(50)"/>
            <column name="delete_ts" type="timestamp"/>
            <column name="deleted_by" type="VARCHAR(50)"/>
        </createTable>
    </changeSet>
    <changeSet id="1758177035271-18" author="Daniil">
        <createTable tableName="tasks">
            <column name="id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="tasks_pkey"/>
            </column>
            <column name="track_stage_id" type="uuid">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="CLOB"/>
            <column name="status" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="expired_time_task" type="timestamp"/>
            <column name="create_ts" type="timestamp"/>
            <column name="created_by" type="VARCHAR(50)"/>
            <column name="update_ts" type="timestamp"/>
            <column name="updated_by" type="VARCHAR(50)"/>
            <column name="delete_ts" type="timestamp"/>
            <column name="deleted_by" type="VARCHAR(50)"/>
        </createTable>
    </changeSet>
    <changeSet id="1758177035271-19" author="Daniil">
        <createTable tableName="track_stage">
            <column name="id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="track_stage_pkey"/>
            </column>
            <column name="onboarding_track_id" type="uuid">
                <constraints nullable="false"/>
            </column>
            <column name="title" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="CLOB"/>
            <column name="order_index" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="create_ts" type="timestamp"/>
            <column name="created_by" type="VARCHAR(50)"/>
            <column name="update_ts" type="timestamp"/>
            <column name="updated_by" type="VARCHAR(50)"/>
            <column name="delete_ts" type="timestamp"/>
            <column name="deleted_by" type="VARCHAR(50)"/>
        </createTable>
    </changeSet>
    <changeSet id="1758177035271-20" author="Daniil">
        <createTable tableName="user_achievement_link">
            <column name="user_id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="user_achievement_link_pkey"/>
            </column>
            <column name="achievement_id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="user_achievement_link_pkey"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1758177035271-21" author="Daniil">
        <createTable tableName="user_answer">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="user_answer_pkey"/>
            </column>
            <column name="user_id" type="uuid">
                <constraints nullable="false"/>
            </column>
            <column name="question_id" type="uuid">
                <constraints nullable="false"/>
            </column>
            <column name="answer_option_id" type="uuid"/>
            <column name="answer_text" type="CLOB"/>
            <column name="answered_at" type="timestamp"/>
        </createTable>
    </changeSet>
    <changeSet id="1758177035271-22" author="Daniil">
        <createTable tableName="user_level">
            <column name="id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="user_level_pkey"/>
            </column>
            <column name="title" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="min_points" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="max_points" type="INT"/>
            <column name="description" type="CLOB"/>
            <column name="create_ts" type="timestamp"/>
            <column name="created_by" type="VARCHAR(50)"/>
            <column name="update_ts" type="timestamp"/>
            <column name="updated_by" type="VARCHAR(50)"/>
            <column name="delete_ts" type="timestamp"/>
            <column name="deleted_by" type="VARCHAR(50)"/>
        </createTable>
    </changeSet>
    <changeSet id="1758177035271-23" author="Daniil">
        <createTable tableName="user_onboarding_track_link">
            <column name="user_id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="user_onboarding_track_link_pkey"/>
            </column>
            <column name="track_id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="user_onboarding_track_link_pkey"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1758177035271-24" author="Daniil">
        <createTable tableName="user_track_stage">
            <column name="stage_id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="user_track_stage_pkey"/>
            </column>
            <column name="user_id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="user_track_stage_pkey"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1758177035271-25" author="Daniil">
        <createTable tableName="users_tasks_link">
            <column name="user_id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="users_tasks_link_pkey"/>
            </column>
            <column name="task_id" type="uuid">
                <constraints nullable="false" primaryKey="true" primaryKeyName="users_tasks_link_pkey"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1758177035271-26" author="Daniil">
        <addUniqueConstraint columnNames="code" constraintName="uq_achievement_code" tableName="achievement"/>
    </changeSet>
    <changeSet id="1758177035271-27" author="Daniil">
        <addUniqueConstraint columnNames="entity_type, entity_id" constraintName="uq_points_rule"
                             tableName="points_rule"/>
    </changeSet>
    <changeSet id="1758177035271-28" author="Daniil">
        <addUniqueConstraint columnNames="name" constraintName="uq_role_name" tableName="role"/>
    </changeSet>
    <changeSet id="1758177035271-29" author="Daniil">
        <addUniqueConstraint columnNames="title" constraintName="uq_user_level_title" tableName="user_level"/>
    </changeSet>
    <changeSet id="1758177035271-35" author="Daniil">
        <createIndex indexName="idx_notification_type" tableName="notification">
            <column name="type"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-38" author="Daniil">
        <createIndex indexName="idx_points_rule_entity_id" tableName="points_rule">
            <column name="entity_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-62" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="anketa_id" baseTableName="anketa_question_link"
                                 constraintName="fk_anketa_question_link_anketa" onDelete="CASCADE"
                                 referencedColumnNames="id" referencedTableName="anketa"/>

        <createIndex indexName="idx_anketa_question_link_anketa_id" tableName="anketa_question_link">
            <column name="anketa_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-63" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="question_id" baseTableName="anketa_question_link"
                                 constraintName="fk_anketa_question_link_question" onDelete="CASCADE"
                                 referencedColumnNames="id" referencedTableName="questions"/>

        <createIndex indexName="idx_anketa_question_link_question_id" tableName="anketa_question_link">
            <column name="question_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-64" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="task_id" baseTableName="anketa" constraintName="fk_anketa_task"
                                 onDelete="CASCADE" referencedColumnNames="id" referencedTableName="tasks"/>

        <createIndex indexName="idx_anketa_task_id" tableName="anketa">
            <column name="task_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-65" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="anketa" constraintName="fk_anketa_user"
                                 onDelete="CASCADE" referencedColumnNames="id" referencedTableName="sys_users"/>

        <createIndex indexName="idx_anketa_user_id" tableName="anketa">
            <column name="user_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-66" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="question_id" baseTableName="answer_option"
                                 constraintName="fk_answer_option_question" onDelete="CASCADE"
                                 referencedColumnNames="id" referencedTableName="questions"/>

        <createIndex indexName="idx_answer_option_question_id" tableName="answer_option">
            <column name="question_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-67" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="notification_id" baseTableName="notification_user_link"
                                 constraintName="fk_notification_user_link_notification" onDelete="CASCADE"
                                 referencedColumnNames="id" referencedTableName="notification"/>

        <createIndex indexName="idx_notification_user_link_notification_id" tableName="notification_user_link">
            <column name="notification_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-68" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="notification_user_link"
                                 constraintName="fk_notification_user_link_user" onDelete="CASCADE"
                                 referencedColumnNames="id" referencedTableName="sys_users"/>

        <createIndex indexName="idx_notification_user_link_user_id" tableName="notification_user_link">
            <column name="user_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-69" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="anketa_id" baseTableName="points_transaction"
                                 constraintName="fk_points_transaction_anketa" onDelete="SET NULL"
                                 referencedColumnNames="id" referencedTableName="anketa"/>

        <createIndex indexName="idx_points_transaction_anketa_id" tableName="points_transaction">
            <column name="anketa_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-70" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="points_rule_id" baseTableName="points_transaction"
                                 constraintName="fk_points_transaction_rule" onDelete="CASCADE"
                                 referencedColumnNames="id" referencedTableName="points_rule"/>

        <createIndex indexName="idx_points_transaction_points_rule_id" tableName="points_transaction">
            <column name="points_rule_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-71" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="points_transaction"
                                 constraintName="fk_points_transaction_user" onDelete="CASCADE"
                                 referencedColumnNames="id" referencedTableName="sys_users"/>

        <createIndex indexName="idx_points_transaction_user" tableName="points_transaction">
            <column name="user_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-72" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="detail_id" baseTableName="progress"
                                 constraintName="fk_progress_detail" onDelete="SET NULL" referencedColumnNames="id"
                                 referencedTableName="task_detail"/>

        <createIndex indexName="idx_progress_detail_id" tableName="progress">
            <column name="detail_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-73" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="assignment_task" baseTableName="progress"
                                 constraintName="fk_progress_task" onDelete="CASCADE" referencedColumnNames="id"
                                 referencedTableName="tasks"/>

        <createIndex indexName="idx_progress_assignment_task" tableName="progress">
            <column name="assignment_task"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-74" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="assignment_user" baseTableName="progress"
                                 constraintName="fk_progress_user" onDelete="CASCADE" referencedColumnNames="id"
                                 referencedTableName="sys_users"/>

        <createIndex indexName="idx_progress_assignment_user" tableName="progress">
            <column name="assignment_user"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-75" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="support_request"
                                 constraintName="fk_support_request_user" onDelete="CASCADE" referencedColumnNames="id"
                                 referencedTableName="sys_users"/>

        <createIndex indexName="idx_support_request_user_id" tableName="support_request">
            <column name="user_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-76" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="role_id" baseTableName="sys_user_role_link"
                                 constraintName="fk_sys_user_role_link_role" onDelete="CASCADE"
                                 referencedColumnNames="id" referencedTableName="role"/>

        <createIndex indexName="idx_sys_user_role_link_role_id" tableName="sys_user_role_link">
            <column name="role_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-77" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="sys_user_role_link"
                                 constraintName="fk_sys_user_role_link_user" onDelete="CASCADE"
                                 referencedColumnNames="id" referencedTableName="sys_users"/>

        <createIndex indexName="idx_sys_user_role_link_user_id" tableName="sys_user_role_link">
            <column name="user_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-78" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="user_level_id" baseTableName="sys_users"
                                 constraintName="fk_sys_users_user_level" onDelete="SET NULL" referencedColumnNames="id"
                                 referencedTableName="user_level"/>

        <createIndex indexName="idx_sys_users_user_level_id" tableName="sys_users">
            <column name="user_level_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-79" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="task_detail_id" baseTableName="task_detail_additional_info"
                                 constraintName="fk_task_detail_info_detail" onDelete="CASCADE"
                                 referencedColumnNames="id" referencedTableName="task_detail"/>

        <createIndex indexName="idx_task_detail_additional_info_task_detail_id" tableName="task_detail_additional_info">
            <column name="task_detail_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-80" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="task_id" baseTableName="task_detail"
                                 constraintName="fk_task_detail_task" onDelete="CASCADE" referencedColumnNames="id"
                                 referencedTableName="tasks"/>

        <createIndex indexName="idx_task_detail_task_id" tableName="task_detail">
            <column name="task_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-81" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="track_stage_id" baseTableName="tasks"
                                 constraintName="fk_tasks_track_stage" onDelete="CASCADE" referencedColumnNames="id"
                                 referencedTableName="track_stage"/>

        <createIndex indexName="idx_tasks_track_stage_id" tableName="tasks">
            <column name="track_stage_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-82" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="onboarding_track_id" baseTableName="track_stage"
                                 constraintName="fk_track_stage_onboarding_track" onDelete="CASCADE"
                                 referencedColumnNames="id" referencedTableName="onboarding_track"/>

        <createIndex indexName="idx_track_stage_onboarding_track_id" tableName="track_stage">
            <column name="onboarding_track_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-83" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="achievement_id" baseTableName="user_achievement_link"
                                 constraintName="fk_user_achievement_link_achievement" onDelete="CASCADE"
                                 referencedColumnNames="id" referencedTableName="achievement"/>

        <createIndex indexName="idx_user_achievement_link_achievement_id" tableName="user_achievement_link">
            <column name="achievement_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-84" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="user_achievement_link"
                                 constraintName="fk_user_achievement_link_user" onDelete="CASCADE"
                                 referencedColumnNames="id" referencedTableName="sys_users"/>

        <createIndex indexName="idx_user_achievement_link_user_id" tableName="user_achievement_link">
            <column name="user_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-85" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="answer_option_id" baseTableName="user_answer"
                                 constraintName="fk_user_answer_option" onDelete="CASCADE" referencedColumnNames="id"
                                 referencedTableName="answer_option"/>

        <createIndex indexName="idx_user_answer_answer_option_id" tableName="user_answer">
            <column name="answer_option_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-86" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="question_id" baseTableName="user_answer"
                                 constraintName="fk_user_answer_question" onDelete="CASCADE" referencedColumnNames="id"
                                 referencedTableName="questions"/>

        <createIndex indexName="idx_user_answer_question_id" tableName="user_answer">
            <column name="question_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-87" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="user_answer"
                                 constraintName="fk_user_answer_user" onDelete="CASCADE" referencedColumnNames="id"
                                 referencedTableName="sys_users"/>

        <createIndex indexName="idx_user_answer_user_id" tableName="user_answer">
            <column name="user_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-88" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="track_id" baseTableName="user_onboarding_track_link"
                                 constraintName="fk_user_onboarding_link_track" onDelete="CASCADE"
                                 referencedColumnNames="id" referencedTableName="onboarding_track"/>
    </changeSet>
    <changeSet id="1758177035271-89" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="user_onboarding_track_link"
                                 constraintName="fk_user_onboarding_link_user" onDelete="CASCADE"
                                 referencedColumnNames="id" referencedTableName="sys_users"/>
    </changeSet>
    <changeSet id="1758177035271-90" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="stage_id" baseTableName="user_track_stage"
                                 constraintName="fk_user_track_stage_stage" onDelete="CASCADE"
                                 referencedColumnNames="id" referencedTableName="track_stage"/>

        <createIndex indexName="idx_user_track_stage_stage_id" tableName="user_track_stage">
            <column name="stage_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-91" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="user_track_stage"
                                 constraintName="fk_user_track_stage_user" onDelete="CASCADE" referencedColumnNames="id"
                                 referencedTableName="sys_users"/>

        <createIndex indexName="idx_user_track_stage_user_id" tableName="user_track_stage">
            <column name="user_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-92" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="task_id" baseTableName="users_tasks_link"
                                 constraintName="fk_users_tasks_link_task" onDelete="CASCADE" referencedColumnNames="id"
                                 referencedTableName="tasks"/>

        <createIndex indexName="idx_users_tasks_link_task_id" tableName="users_tasks_link">
            <column name="task_id"/>
        </createIndex>
    </changeSet>
    <changeSet id="1758177035271-93" author="Daniil">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="users_tasks_link"
                                 constraintName="fk_users_tasks_link_user" onDelete="CASCADE" referencedColumnNames="id"
                                 referencedTableName="sys_users"/>

        <createIndex indexName="idx_users_tasks_link_user_id" tableName="users_tasks_link">
            <column name="user_id"/>
        </createIndex>
    </changeSet>

</databaseChangeLog>